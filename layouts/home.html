{{ define "main" }}

<div class="container text-center my-3">
  <h2 id="roomsHeading" class="text-white d-inline-block">
    Jitsi-Raumübersicht
  </h2>
  <div class="dropdown d-inline-block h2">
    <button type="button" class="btn dropdown-toggle text-white" data-bs-toggle="dropdown"></button>
    <ul class="dropdown-menu dropdown-menu-end">
      <li><a class="dropdown-item" href="#" onclick="requestNotificationPermission()">Aktiviere Raumbenachrichtungen</a></li>
    </ul>
  </div>
  <div id="rooms" class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 justify-content-center text-start">
    <div class="col">
      <div class="text-dark d-block card">
        <div class="card-header text-center">
          <h5 class="card-title">Neuer Raum</h5>
        </div>
        <div class="card-body">
          <div class="input-group my-4" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Räume, die mit _ beginnen, werden nicht gelistet.">
            <input id="roomname" class="form-control" type="text" placeholder="Name">
            <button id="openroom" type="button" class="btn btn-outline-dark" onclick="window.open('https://login.hang.{{ $.Site.Params.baseDomain }}/' + $('#roomname').val(), '_blank')">
              Eröffnen
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container my-3">
  <h2 class="text-white text-center">Apps</h2>
  <div class="row row-cols-2 row-cols-md-3 g-4 justify-content-center">
    {{ range .Site.Data.links.items }}
    <div class="col">
      {{ $url := printf "https://%s%s/%s" .subDomain $.Site.Params.baseDomain (default "" .uri) }}
      <a href="{{ $url }}" target="_blank" class="text-decoration-none text-dark text-center d-block card card-hover cursorPointer h-100">
        <div class="card-body">
          {{ $img := resources.Get (path.Join "/img/" .icon) }}
          <img src="{{ $img.RelPermalink }}" class="card-icon mx-auto mb-2 {{ if .bg }} bg-primary bg-gradient {{ end }} rounded" width="56px">
          <h5 class="card-title">
            {{ .title | safeHTML }}
          </h5>
        </div>
      </a>
    </div>
    {{ end }}
  </div>
</div>

{{ end }}

{{ define "main" }}

<div class="modal" id="eventModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-dark">
      <div class="modal-header">
        <h5 id="modalTitle" class="modal-title">Event Title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div id="modalBody" class="modal-body text-start">
      </div>
      <div id="modalFooter" class="modal-footer">
        <span id="modalFooterBadge" class="badge">&nbsp;</span>
        <span id="modalFooterText"></span>
      </div>
    </div>
  </div>
</div>

<div class="container accordion px-1">
  <div class="accordion-item my-3 rounded">
    <h2 class="accordion-header">
      <button class="accordion-button bg-transparent" type="button" data-bs-toggle="collapse" data-bs-target="#accordion-about">
        <h5 class="w-100 text-center text-white">
          Wo bin ich hier?
        </h5>
      </button>
    </h2>
    <div id="accordion-about" class="accordion-collapse collapse show">
      <div class="accordion-body text-center">
        {{ .Site.Title }} ist eine offene Plattform zur Information und Organisation von BDSM-Veranstaltungen.
        <br><br>
        Hier kannst du im Kalender nach Events in deiner Gegend suchen, an Online-Konferenzen teilnehmen, dich im Chat mit anderen Mitgliedern der Community austauschen, oder auch eigene Events organisieren und darüber informieren. Dafür bieten wir Tools wie Cloud-Speicher, Event-Ticketsystem und Online-Kollaborationssoftware an.
        <br><br>
        Diese Seite befindet sich noch in der Entwicklungsphase.
        <br><br>
        <a href="https://github.com/devium/kink" class="text-white"><span class="bi bi-github h6 text-white px-1"></span>Quellcode (Cluster)</a>
        <a href="https://github.com/devium/autsch-home" class="text-white"><span class="bi bi-github h6 text-white px-1"></span>Quellcode (Homepage)</a>
      </div>
    </div>
  </div>

  <div class="accordion-item my-3 rounded">
    <h2 class="accordion-header">
      <button class="accordion-button bg-transparent collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#accordion-calendar">
        <h5 class="w-100 text-center text-white">
          Kalender
        </h5>
      </button>
    </h2>
    <div id="accordion-calendar" class="accordion-collapse collapse">
      <div class="accordion-body px-1 px-md-4">
        <div id="calendars-dropdown" class="dropdown text-end">
          <a href="https://next.{{ $.Site.Params.baseDomain }}/apps/calendar" target="_blank" class="btn btn-dark mt-1">
            Eventvorschlag einreichen<span class="px-2 bi bi-box-arrow-up-right"></span>
          </a>

          <button class="btn btn-dark dropdown-toggle mt-1 ms-2" type="button" data-bs-toggle="dropdown">
            <span class="bi bi-list"></span>
          </button>

          <ul class="dropdown-menu dropdown-menu-form bg-dark">
            <table class="table align-middle text-white">
              <thead>
                <tr>
                  <th>
                    <input class="form-check-input" type="checkbox" value="" id="checkbox-all">
                    <label class="form-check-label" for="checkbox-all">
                      Alle / Keine
                    </label>
                  </th>
                  <th>In Nextcloud öffnen</th>
                  <th>iCal-Link kopieren</th>
                </tr>
              </thead>

              <tbody>
                {{ range .Site.Data.calendars.items }}
                <tr>
                  <td>
                    <input class="form-check-input calendar-checkbox" type="checkbox" value="" id="{{ .id }}" {{ if .checked -}} checked {{- end }}>
                    <span id="color-{{ .id }}" class="badge" style="background-color: {{ .color }}">&nbsp;</span>
                    <label class="form-check-label user-select-none" for="{{ .id }}">
                      {{ .name }}
                    </label>
                  </td>

                  <td class="text-center">
                    <a href="https://next.{{ $.Site.Params.baseDomain }}/apps/calendar/p/{{ .id }}" target="_blank" class="btn btn-xs"><span class="bi bi-box-arrow-up-right text-white"></span></a>
                  </td>

                  <td class="text-center text-white">
                    <button id="copy-ical-{{ .id }}" class="btn btn-xs copy-ical" role="button">
                      <span id="copy-ical-icon-{{ .id }}" class="bi bi-clipboard-plus text-white"></span>
                    </button>
                  </td>
                </tr>
                {{ end }}
              </tbody>
            </table>
          </ul>
        </div>

        <div id='fullcalendar' class="my-2">
        </div>
      </div>
    </div>
  </div>

  <div class="accordion-item my-3 rounded">
    <h2 class="accordion-header">
      <button class="accordion-button bg-transparent collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#accordionRooms">
        <h5 class="w-100 text-center text-white">
          Jitsi-Raumübersicht
          <span id="numRooms">(0)</span>
          <span id="notification-request" class="cursor-pointer bi bi-bell-fill" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Aktiviere Raumbenachrichtigungen"/>
        </h5>
      </button>
    </h2>
    <div id="accordionRooms" class="accordion-collapse collapse">
      <div id="rooms" class="accordion-body row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 justify-content-center">
        <div class="col">
          <div class="text-dark d-block card">
            <div class="card-header text-center">
              <h5 class="card-title">Neuer Raum</h5>
            </div>
            <div class="card-body">
              <div class="input-group my-4" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Räume, die mit _ beginnen, werden nicht gelistet.">
                <input id="roomname" class="form-control" type="text" placeholder="Name">
                <button id="openroom" type="button" class="btn btn-outline-dark">
                  Eröffnen
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  {{ range .Site.Data.links }}
  <div class="accordion-item apps my-3 rounded">
    <h2 class="accordion-header">
      <button class="accordion-button bg-transparent {{ if not .show -}} collapsed {{- end }}" type="button" data-bs-toggle="collapse" data-bs-target="#accordion-{{ .id }}">
        <h5 class="w-100 text-center text-white">
          {{ .title }}
          {{ if .info }}
          <span class="cursor-pointer bi bi-question-circle" data-bs-toggle="tooltip" data-bs-placement="bottom" title="{{ replace .info "DOMAIN" $.Site.Params.baseDomain }}"/>
          {{ end }}
        </h5>
      </button>
    </h2>
    <div id="accordion-{{ .id }}" class="accordion-collapse collapse {{ if .show -}} show {{- end }}">
      <div class="accordion-body text-center">
        {{ .body | safeHTML }}
        <div class="row row-cols-2 row-cols-sm-3 row-cols-md-4 g-3 p-3 justify-content-center p-0">
          {{ range .links }}
          <div class="col">
            <a href="{{ replace .url "DOMAIN" $.Site.Params.baseDomain }}" {{- if not .sameTab }} target="_blank" {{ end -}} class="text-decoration-none text-dark text-center d-block card card-hover h-100">
              <div class="card-body">
                {{ $img := resources.Get (path.Join "/img/" .icon) }}
                <img src="{{ $img.RelPermalink }}" class="card-icon mx-auto mb-2 rounded" width="48px">
                <h6 class="card-title">
                  {{ .title | safeHTML }}
                </h6>
              </div>
            </a>
          </div>
          {{ end }}
        </div>
      </div>
    </div>
  </div>
  {{ end }}
</div>

{{ end }}
